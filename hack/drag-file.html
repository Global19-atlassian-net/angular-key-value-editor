<html>
  <head>
    <style>
      #drag-elements li {
        border: 1px solid #999;
        background-color: #e2e2e2;
        padding: 2px;
        margin: 2px;
      }
      #dd-files {
        padding: 25px;
        background-color: #e2e2e2;
        border: 1px solid #999;
        text-align: center;
      }
      .over {
        border: 1px solid #990000 !important;
        background-color: #e8cccc !important;
        color: #990000 !important;
      }
    </style>
  </head>
  <body>
    <div id="dd-files">Drop a .txt file here</div>
    <pre id="file-content"></pre>
    <script>
      // quick tutorial follow-along from:
      // http://blog.teamtreehouse.com/implementing-native-drag-and-drop
      //
      // BROWSER SUPPORT:
      // IE 10+ â€“ Partially supported in versions 5.5 and up (no files)
      // IE Mobile 10
      // Firefox 3.5+
      // Chrome 4.0+
      // Safari 3.1+
      // Opera 12+
      var dropZone = document.querySelector('#dd-files');
      var fileContents = document.querySelector('#file-content');

      // Read the contents of a file.
      function readTextFile(file) {
        var reader = new FileReader();

        reader.onloadend = function(e) {
          if (e.target.readyState == FileReader.DONE) {
            var content = reader.result;
            fileContents.innerHTML = "File: " + file.name + "\n\n" + content;
          } else {
            console.log('reading state:', e.target.readyState);
          }

        }

        reader.readAsBinaryString(file);
      }


      dropZone.addEventListener('dragover', function(evt) {
        if(evt.preventDefault) {
          evt.preventDefault();
        }
        if(evt.stopPropagation) {
          evt.stopPropagation();
        }
        evt.dataTransfer.dropEffect = 'copy';
      });

      // Event Listener for when the dragged file enters the drop zone.
      dropZone.addEventListener('dragenter', function(e) {
        this.className = "over";
      });

      // Event Listener for when the dragged file leaves the drop zone.
      dropZone.addEventListener('dragleave', function(e) {
        this.className = "";
      });

      // Event Listener for when the dragged file dropped in the drop zone.
      dropZone.addEventListener('drop', function(e) {
        if (e.preventDefault) e.preventDefault();
        if (e.stopPropagation) e.stopPropagation();

        this.className = "";

        var fileList = e.dataTransfer.files;
        console.log(fileList);
        if (fileList.length > 0) {
          readTextFile(fileList[0]);
        }
      });

    </script>
  </body>
</html>
